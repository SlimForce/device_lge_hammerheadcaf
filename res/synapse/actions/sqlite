BB=/sbin/busybox;
SQL3=/system/xbin/sqlite3;

case "$1" in
	PreferredNetworkMode)
		DB=/data/data/com.android.providers.settings/databases;
		cd $DB;

		if [[ ! -z $2 ]]; then
			$SQL3 settings.db "INSERT INTO global VALUES(null, 'preferred_network_mode', $2);" 2> /dev/null;
			#$SQL3 settings.db "UPDATE global/secure SET value = $2 WHERE name = 'preferred_network_mode';";
			$BB killall com.android.phone
		fi;

		VALUE=`$SQL3 settings.db "SELECT value FROM global WHERE name = 'preferred_network_mode';" 2> /dev/null`;
		if [[ ! -z $VALUE ]]; then $BB echo $VALUE; else $BB echo "0"; fi;
	;;
esac;
